		.ORIG X3000

		LDI R0, PTR1
		LDI R1, PTR2

		LD R2, MASK1
		AND R3, R0, R2
		AND R4, R1, R2
	
		LD R2, MASK2
		AND R3, R0, R2
		AND R4, R1, R2

		NOT R2, R1
		ADD R2, R2, #1
		ADD R2, R0, R2

		BRN SWAP
		BRZP END

SWAP		ADD R0, R0, R3
		ADD R1, R1, R4
	
		LD R2, PTR1

		STR R1, R2, #0
		STR R0, R2, #1


CLEAR		AND R0, R0, #0
		AND R2, R2, #0
		AND R4, R4, #0
		AND R7, R7, #0
		AND R1, R1, #0
		BRZ END

HISTROGRAM	LDR R1, R3, #0
		LD R6, CLEARCREDITID
		AND R1, R1, R6
		BRZ END
		LDR R1, R3, #0
		LD R6, CLEARCREDITID
		AND R1, R6, R1
		LD R6, NUMFRESHMEN
		ADD R1, R1, R6
		BRP SOPHOMORES
		ADD R0, R0, #1
		ADD R5, R5, #-1
		ADD R3, R3, #1
		BR HISTOGRAM

SOPHOMORES	LD R6, NUMSOPHOMORES
		ADD R1, R1, R6
		BRP JUNIORS
		ADD R2, R2, #1
		ADD R5, R5, #-1
		ADD R3, R3, #1
		BR HISTOGRAM

JUNIORS		LD R6, NUMJUNIORS
		ADD R1, R1, R6
		BRP SENIORS
		ADD R2, R2, #1
		ADD R5, R5, #-1
		ADD R3, R3, #1
		BR HISTOGRAM

SENIORS		LD R6, NUMSENIORS
		ADD R1, R1, R6
		BRZ END
		ADD R2, R2, #1
		ADD R5, R5, #-1
		ADD R3, R3, #1
		BR HISTOGRAM


END		HALT
HISTOGRAM	.FILL x4000
NUMFRESHMEN	.FILL x-29
NUMSOPHOMORES	.FILL x-31
NUMJUNIORS	.FILL x-30
NUMSENIORS	.FILL X-10
PTR1		.FILL x4004
PTR2		.FILL x4005
MASK1		.FILL xFF00
MASK2		.FILL x00FF
CLEARCREDITID	.FILL xFFFF
		.END